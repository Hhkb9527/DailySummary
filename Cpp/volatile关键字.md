## 保持内存可见性

程序访问变量需要将变量从内存中加载到寄存器，然后从寄存器中取出使用。如果频繁读取的变量，编译器可能会将这个过程优化为直接从寄存器读取。

在多线程下，可能产生以下情况：线程1将变量A改变，线程2由于直接从寄存器读取值，导致未能感知到A的变化。

## 禁止优化

假设有代码：`Node* n = new Node();`

这行代码执行分为三步：

```shell
1.开辟一块空间用来放变量
2.调用构造函数初始化空间
3.将指针返回赋值给变量n
```

在编译器的优化下，这三步的顺序可能会被优化为：

```shell
1.开辟空间
2.将空间指针返回给变量n
3.调用构造函数初始化空间
```

优化后存在的问题：线程A执行到第二步 => 线程B发现n指针不为空，于是开始使用 => 由于空间还未初始化报错

`volatile`关键字可以告诉编译器，禁止优化

